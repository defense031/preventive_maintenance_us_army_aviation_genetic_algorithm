# ====================================================================================
# MEDIUM FEATURE CONFIGURATION
# ====================================================================================
# Expanded feature set including per-aircraft health, status, and mission context.
# Adds categorical encodings and mission demand forecasting.
#
# Use Case: Intermediate optimization, exploring status/mission interactions
# Dimensionality: ~40 features (6 per-aircraft × 8 + 5 mission = 53 features)
# Chromosome Size: Depth-3 tree = 7 splits + 7 thresholds + 40 leaf scores = 54 genes
# ====================================================================================

name: "medium"
description: "Intermediate feature set - per-aircraft health + mission context"
dimensionality: 53  # 6 per-aircraft × 8 + 5 mission

# ====================================================================================
# PER-AIRCRAFT FEATURES (6 features × 8 aircraft = 48 total)
# ====================================================================================
per_aircraft_features:
  # Health metrics (from simple)
  - name: "observed_rul"
    type: "float"
    source: "aircraft.observed_rul"
    description: "Remaining useful life from sensor (with noise)"
    normalization: "minmax"
    bounds: [0, 500]
    priority: "high"

  - name: "hours_to_minor"
    type: "float"
    source: "derived"
    formula: "250 - aircraft.hours_since_minor_phase"
    description: "Hours until minor phase maintenance required"
    normalization: "minmax"
    bounds: [-50, 250]
    priority: "high"

  - name: "hours_to_major"
    type: "float"
    source: "derived"
    formula: "500 - aircraft.hours_since_major_phase"
    description: "Hours until major phase maintenance required"
    normalization: "minmax"
    bounds: [-50, 500]
    priority: "high"

  # Status and operational state (new in medium)
  - name: "status_fmc"
    type: "binary"
    source: "derived"
    formula: "1.0 if aircraft.status == 'FMC' else 0.0"
    description: "Binary indicator: 1 if FMC, 0 if NMC"
    normalization: "none"
    bounds: [0, 1]
    priority: "medium"

  - name: "flew_today"
    type: "binary"
    source: "aircraft.flew_today"
    description: "Binary indicator: 1 if aircraft flew today"
    normalization: "none"
    bounds: [0, 1]
    priority: "low"

  - name: "total_flight_hours"
    type: "float"
    source: "aircraft.total_flight_hours"
    description: "Cumulative flight hours (lifetime usage indicator)"
    normalization: "minmax"
    bounds: [0, 10000]  # Assume max 10k hours lifetime
    priority: "low"

# ====================================================================================
# MISSION FEATURES (5 features total)
# ====================================================================================
mission_features:
  - name: "mission_today"
    type: "integer"
    source: "mission_forecast[0].required_aircraft"
    description: "Number of aircraft required for today's mission"
    normalization: "minmax"
    bounds: [0, 8]
    priority: "high"

  - name: "mission_tomorrow"
    type: "integer"
    source: "mission_forecast[1].required_aircraft"
    description: "Mission requirement tomorrow (1-day lookahead)"
    normalization: "minmax"
    bounds: [0, 8]
    priority: "medium"

  - name: "mission_peak_3day"
    type: "integer"
    source: "derived"
    formula: "max([m.required_aircraft for m in mission_forecast[:3]])"
    description: "Peak demand in next 3 days"
    normalization: "minmax"
    bounds: [0, 8]
    priority: "medium"

  - name: "mission_avg_7day"
    type: "float"
    source: "derived"
    formula: "mean([m.required_aircraft for m in mission_forecast[:7]])"
    description: "Average demand next 7 days (tempo indicator)"
    normalization: "minmax"
    bounds: [0, 8]
    priority: "low"

  - name: "mission_avg_14day"
    type: "float"
    source: "derived"
    formula: "mean([m.required_aircraft for m in mission_forecast[:14]])"
    description: "Average demand next 14 days (long-term planning)"
    normalization: "minmax"
    bounds: [0, 8]
    priority: "low"

# ====================================================================================
# FLEET-LEVEL FEATURES - NOT INCLUDED IN MEDIUM
# ====================================================================================
fleet_features: []

# ====================================================================================
# TEMPORAL FEATURES - NOT INCLUDED IN MEDIUM
# ====================================================================================
temporal_features: []

# ====================================================================================
# NORMALIZATION SETTINGS
# ====================================================================================
normalization:
  method: "minmax"  # Scale all features to [0, 1]
  handle_missing: "zero"
  clip_outliers: true
  outlier_std_threshold: 3.0

# ====================================================================================
# ENCODING SETTINGS
# ====================================================================================
encoding:
  categorical_method: "binary"  # Use binary encoding for status
  status_encoding:
    FMC: 1.0
    NMC: 0.0
